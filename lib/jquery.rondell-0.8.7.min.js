/*!
  jQuery rondell plugin
  @name jquery.rondell.js
  @author Sebastian Helzle (sebastian@helzle.net or @sebobo)
  @version 0.8.7
  @date 02/03/2012
  @category jQuery plugin
  @copyright (c) 2009-2012 Sebastian Helzle (www.sebastianhelzle.net)
  @license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
*/
(function(){var a=function(b,c){return function(){return b.apply(c,arguments)}};(function(b){var c;b.rondell={version:"0.8.7",name:"rondell",defaults:{showContainer:true,resizeableClass:"resizeable",smallClass:"itemSmall",hiddenClass:"itemHidden",currentLayer:0,container:null,radius:{x:250,y:50},center:{left:340,top:160},size:{width:null,height:null},visibleItems:"auto",scaling:2,opacityMin:0.05,fadeTime:300,zIndex:1000,itemProperties:{delay:100,cssClass:"rondellItem",size:{width:150,height:150},sizeFocused:{width:0,height:0}},repeating:true,alwaysShowCaption:false,autoRotation:{enabled:false,paused:false,_timer:-1,direction:0,once:false,delay:5000},controls:{enabled:true,fadeTime:400,margin:{x:130,y:270}},strings:{prev:"prev",next:"next"},mousewheel:{enabled:true,threshold:5,minTimeBetweenShifts:300,_lastShift:0},touch:{enabled:true,preventDefaults:true,threshold:100,_start:void 0,_end:void 0},randomStart:false,funcEase:"easeInOutQuad",theme:"default",preset:"",effect:null}};if(!b.easing.easeInOutQuad){b.easing.easeInOutQuad=function(f,g,e,i,h){if((g/=h/2)<1){return i/2*g*g+e}else{return -i/2*((--g)*(g-2)-1)+e}}}c=(function(){d.rondellCount=0;d.activeRondell=null;function d(f,g,e){if(e==null){e=void 0}this.keyDown=a(this.keyDown,this);this.isFocused=a(this.isFocused,this);this._autoShift=a(this._autoShift,this);this.shiftRight=a(this.shiftRight,this);this.shiftLeft=a(this.shiftLeft,this);this._refreshControls=a(this._refreshControls,this);this.shiftTo=a(this.shiftTo,this);this.layerFadeOut=a(this.layerFadeOut,this);this.layerFadeIn=a(this.layerFadeIn,this);this._hover=a(this._hover,this);this._onTouch=a(this._onTouch,this);this._onMousewheel=a(this._onMousewheel,this);this._start=a(this._start,this);this._loadItem=a(this._loadItem,this);this._onloadItem=a(this._onloadItem,this);this._initItem=a(this._initItem,this);this._getItem=a(this._getItem,this);this.hideCaption=a(this.hideCaption,this);this.showCaption=a(this.showCaption,this);this.id=d.rondellCount++;this.items=[];this.maxItems=g;this.loadedItems=0;this.initCallback=e;if((f!=null?f.preset:void 0) in b.rondell.presets){b.extend(true,this,b.rondell.defaults,b.rondell.presets[f.preset],f||{})}else{b.extend(true,this,b.rondell.defaults,f||{})}this.itemProperties.sizeFocused={width:this.itemProperties.sizeFocused.width||this.itemProperties.size.width*this.scaling,height:this.itemProperties.sizeFocused.height||this.itemProperties.size.height*this.scaling};this.size={width:this.size.width||this.center.left*2,height:this.size.height||this.center.top*2}}d.prototype.funcLeft=function(f,e){return e.center.left-e.itemProperties.size.width/2+Math.sin(f)*e.radius.x};d.prototype.funcTop=function(f,e){return e.center.top-e.itemProperties.size.height/2+Math.cos(f)*e.radius.y};d.prototype.funcDiff=function(f,e){return Math.pow(Math.abs(f)/e.maxItems,0.5)*Math.PI};d.prototype.funcOpacity=function(f,e){if(e.visibleItems>1){return Math.max(0,1-Math.pow(f/e.visibleItems,2))}else{return 0}};d.prototype.funcSize=function(f,e){return 1};d.prototype.showCaption=function(e){return b(".rondellCaption.overlay",this._getItem(e).object).css({height:"auto",overflow:"auto"}).stop(true).fadeTo(300,1)};d.prototype.hideCaption=function(f){var e;e=b(".rondellCaption.overlay:visible",this._getItem(f).object);return e.css({height:e.height(),overflow:"hidden"}).stop(true).fadeTo(200,0)};d.prototype._getItem=function(e){return this.items[e-1]};d.prototype._initItem=function(g,k){var m,l,j,h,f,e,i=this;this.items[g-1]=k;if(k.object[0].nodeName.toLowerCase()==="img"){k.object.wrap("<div/>");k.object=k.object.parent();k.icon=b("img:first",k.object)}j=(h=k.icon)!=null?h.siblings():void 0;if(!((j!=null?j.length:void 0)||k.icon)&&k.object.children().length){j=k.object.children()}if(!(j!=null?j.length:void 0)){m=k.object.attr("title")||((f=k.icon)!=null?f.attr("title"):void 0)||((e=k.icon)!=null?e.attr("alt"):void 0);if(m){j=b("<p>"+m+"</p>");k.object.append(j)}}if(j!=null?j.length:void 0){l=b('<div class="rondellCaption"></div>');if(k.icon){l.addClass("overlay")}j.wrapAll(l)}k.object.addClass("rondellItemNew "+this.itemProperties.cssClass).css({opacity:0,width:k.sizeSmall.width,height:k.sizeSmall.height,left:this.center.left-k.sizeFocused.width/2,top:this.center.top-k.sizeFocused.height/2}).bind("mouseover mouseout click",function(n){switch(n.type){case"mouseover":if(k.object.is(":visible")&&!k.hidden){return k.object.addClass("rondellItemHovered")}break;case"mouseout":return k.object.removeClass("rondellItemHovered");case"click":if(i.currentLayer!==g){n.preventDefault()}if(k.object.is(":visible")&&!k.hidden){return i.shiftTo(g)}}});this.loadedItems+=1;if(this.loadedItems===this.maxItems){return this._start()}};d.prototype._onloadItem=function(e,k,f){var q,i,o,m,h,p,j,g,l,n;if(f==null){f=void 0}m=k.is("img")?k:b("img:first",k);h=m.hasClass(this.resizeableClass);j=e;p=this.itemProperties.size;o=this.itemProperties.sizeFocused;g=this.scaling;i=n=(f!=null?f.width():void 0)||(f!=null?f[0].width:void 0)||m[0].width||m.width();q=l=(f!=null?f.height():void 0)||(f!=null?f[0].height:void 0)||m[0].height||m.height();if(f!=null){f.remove()}if(!(n&&l)){return}if(h){l*=p.width/n;n=p.width;if(l>p.height){n*=p.height/l;l=p.height}q*=o.width/i;i=o.width;if(q>o.height){i*=o.height/q;q=o.height}}else{n=p.width;l=p.height;i=o.width;q=o.height}return this._initItem(j,{object:k,icon:m,small:false,hidden:false,resizeable:h,sizeSmall:{width:n,height:l},sizeFocused:{width:i,height:q}})};d.prototype._loadItem=function(f,g){var i,e,h=this;e=g.is("img")?g:b("img:first",g);if(e.width()>0||(e[0].complete&&e[0].width>0)){return this._onloadItem(f,g)}else{i=b('<img style="display:none"/>');b("body").append(i);return i.one("load",function(){return h._onloadItem(f,g,i)}).attr("src",e.attr("src"))}};d.prototype._start=function(){var e;if(this.randomStart){this.currentLayer=Math.round(Math.random()*(this.maxItems-1))}else{this.currentLayer=Math.max(0,Math.min(this.currentLayer||Math.round(this.maxItems/2),this.maxItems))}if(this.visibleItems==="auto"){this.visibleItems=Math.max(2,Math.floor(this.maxItems/2))}e=this.controls;if(e.enabled){this.controls._shiftLeft=b('<a class="rondellControl rondellShiftLeft" href="#"/>').text(this.strings.prev).click(this.shiftLeft).css({left:e.margin.x,top:e.margin.y,"z-index":this.zIndex+this.maxItems+2});this.controls._shiftRight=b('<a class="rondellControl rondellShiftRight" href="#/"/>').text(this.strings.next).click(this.shiftRight).css({right:e.margin.x,top:e.margin.y,"z-index":this.zIndex+this.maxItems+2});this.container.append(this.controls._shiftLeft,this.controls._shiftRight)}b(document).keydown(this.keyDown);if(this.mousewheel.enabled&&(b.fn.mousewheel!=null)){this.container.bind("mousewheel",this._onMousewheel)}if(this._onMobile()){if(this.touch.enabled){this.container.bind("touchstart touchmove touchend",this._onTouch)}}else{this.container.bind("mouseover mouseout",this._hover)}this.container.removeClass("initializing");if(typeof this.initCallback==="function"){this.initCallback(this)}return this.shiftTo(this.currentLayer)};d.prototype._onMobile=function(){return typeof Modernizr!=="undefined"&&Modernizr!==null?Modernizr.touch:void 0};d.prototype._onMousewheel=function(i,l,n,m){var g,h,k,j,f;if(!(this.mousewheel.enabled&&this.isFocused())){return}g=(new Date()).getTime();if(g-this.mousewheel._lastShift<this.mousewheel.minTimeBetweenShifts){return}k=b(window);f=k.scrollTop();j=f+k.height();h=this.container.offset().top+this.container.outerHeight()/2;if(h>f&&h<j&&Math.abs(n)>=this.mousewheel.threshold){if(n<0){this.shiftLeft()}else{this.shiftRight()}return this.mousewheel._lastShift=g}};d.prototype._onTouch=function(f){var h,g;if(!this.touch.enabled){return}g=f.originalEvent.touches[0]||f.originalEvent.changedTouches[0];switch(f.type){case"touchstart":this.touch._start={x:g.pageX,y:g.pageY};break;case"touchmove":if(this.touch.preventDefaults){f.preventDefault()}this.touch._end={x:g.pageX,y:g.pageY};break;case"touchend":if(this.touch._start&&this.touch._end){h=this.touch._end.x-this.touch._start.x;if(Math.abs(h)>this.touch.threshold){if(h>0){this.shiftLeft()}if(h<0){this.shiftRight()}}this.touch._start=this.touch._end=void 0}}return true};d.prototype._hover=function(g){var f;f=this.autoRotation.paused;if(g.type==="mouseover"){d.activeRondell=this.id;this.hovering=true;if(!f){this.autoRotation.paused=true;this.showCaption(this.currentLayer)}}else{this.hovering=false;if(f&&!this.autoRotation.once){this.autoRotation.paused=false;this._autoShift()}if(!this.alwaysShowCaption){this.hideCaption(this.currentLayer)}}if(this.controls.enabled){return this._refreshControls()}};d.prototype.layerFadeIn=function(g){var h,e,f,i,j=this;h=this._getItem(g);h.small=false;f=h.sizeFocused.width;e=h.sizeFocused.height;h.object.stop(true).show(0).css("z-index",this.zIndex+this.maxItems).addClass("rondellItemFocused").animate({width:f,height:e,left:this.center.left-f/2,top:this.center.top-e/2,opacity:1},this.fadeTime,this.funcEase,function(){j._autoShift();if(j.hovering||j.alwaysShowCaption||j._onMobile()){return j.showCaption(g)}});if(h.icon&&!h.resizeable){i=(this.itemProperties.sizeFocused.height-h.icon.height())/2;return h.icon.stop(true).animate({marginTop:i,marginBottom:i},this.fadeTime)}};d.prototype.layerFadeOut=function(j){var p,k,r,h,m,g,f,o,i,n,e,s,q,l=this;r=this._getItem(j);f=Math.abs(j-this.currentLayer);o=j;if(f>this.visibleItems&&f>this.maxItems/2&&this.repeating){if(j>this.currentLayer){o-=this.maxItems}else{o+=this.maxItems}f=Math.abs(o-this.currentLayer)}g=this.funcDiff(o-this.currentLayer,this);if(o<this.currentLayer){g*=-1}m=r.sizeSmall.width*this.funcSize(g,this);h=r.sizeSmall.height*this.funcSize(g,this);e=this.funcLeft(g,this)+(this.itemProperties.size.width-m)/2;s=this.funcTop(g,this)+(this.itemProperties.size.height-h)/2;q=this.zIndex+(g<0?o:-o);p=this.fadeTime+this.itemProperties.delay*f;k=r.object.hasClass("rondellItemNew");if(k||f<=this.visibleItems){this.hideCaption(j);n=this.funcOpacity(f,this);if(n>=this.opacityMin){r.object.show()}r.object.removeClass("rondellItemNew rondellItemFocused").stop(true).css("z-index",q).animate({width:m,height:h,left:e,top:s,opacity:n},p,this.funcEase,function(){if(r.object.css("opacity")<l.opacityMin){return r.object.hide()}else{return r.object.show()}});r.hidden=false;if(!r.small){r.small=true;if(r.icon&&!r.resizeable){i=(this.itemProperties.size.height-r.icon.height())/2;return r.icon.stop(true).animate({marginTop:i,marginBottom:i},p)}}}else{if(r.hidden){return r.object.css({left:e,top:s,"z-index":q})}else{r.hidden=true;return r.object.stop(true).css("z-index",q).animate({opacity:0},p/2,this.funcEase,function(){},this.hideCaption(j))}}};d.prototype.shiftTo=function(f){var e,g;if(this.repeating){if(f<1){f=this.maxItems}else{if(f>this.maxItems){f=1}}}if(f>0&&f<=this.maxItems){this.currentLayer=f;for(e=1,g=this.maxItems;1<=g?e<=g:e>=g;1<=g?e++:e--){if(e!==this.currentLayer){this.layerFadeOut(e)}}this.layerFadeIn(this.currentLayer)}return this._refreshControls()};d.prototype._refreshControls=function(){if(!this.controls.enabled){return}this.controls._shiftLeft.stop().fadeTo(this.controls.fadeTime,(this.currentLayer>1||this.repeating)&&this.hovering?1:0);return this.controls._shiftRight.stop().fadeTo(this.controls.fadeTime,(this.currentLayer<this.maxItems||this.repeating)&&this.hovering?1:0)};d.prototype.shiftLeft=function(f){if(f!=null){f.preventDefault()}return this.shiftTo(this.currentLayer-1)};d.prototype.shiftRight=function(f){if(f!=null){f.preventDefault()}return this.shiftTo(this.currentLayer+1)};d.prototype._autoShift=function(){var f,e=this;f=this.autoRotation;if(this.isActive()&&f.enabled&&f._timer<0){return f._timer=window.setTimeout(function(){e.autoRotation._timer=-1;if(e.isActive()&&!f.paused){if(f.direction){return e.shiftRight()}else{return e.shiftLeft()}}},f.delay)}};d.prototype.isActive=function(){return true};d.prototype.isFocused=function(){return d.activeRondell===this.id};d.prototype.keyDown=function(f){if(this.isActive()&&this.isFocused()){if(this.autoRotation._timer>=0){window.clearTimeout(this.autoRotation._timer);this.autoRotation._timer=-1}switch(f.which){case 37:return this.shiftLeft(f);case 39:return this.shiftRight(f)}}};return d})();return b.fn.rondell=function(e,f){var d;if(e==null){e={}}if(f==null){f=void 0}d=new c(e,this.length,f);d.container=this.wrapAll(b('<div class="rondellContainer initializing rondellTheme_'+d.theme+'"/>').css(d.size)).parent();if(d.showContainer){d.container.parent().show()}this.each(function(g){var h,i;i=b(this);h=g+1;if(i.is("img")||b("img:first",i).length){return d._loadItem(h,i)}else{return d._initItem(h,{object:i,icon:null,small:false,hidden:false,resizeable:false,sizeSmall:d.itemProperties.size,sizeFocused:d.itemProperties.sizeFocused})}});return d}})(jQuery);
/*!
    Presets for jQuery rondell plugin
    
    @author Sebastian Helzle (sebastian@helzle.net or @sebobo)
    @category jQuery plugin
    @copyright (c) 2009-2011 Sebastian Helzle (www.sebastianhelzle.net)
    @license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
  */
(function(b){b.rondell=b.rondell||{};return b.rondell.presets={carousel:{autoRotation:{enabled:true,direction:1,once:false,delay:5000},radius:{x:240},center:{left:340,top:160},controls:{margin:{x:130,y:260}},randomStart:true,currentLayer:1,funcSize:function(d,c){return(c.maxItems/Math.abs(d))/c.maxItems}},products:{repeating:false,alwaysShowCaption:true,visibleItems:4,itemProperties:{delay:0,size:{width:100,height:200},sizeFocused:{width:300,height:200}},center:{left:400,top:100},controls:{margin:{x:210,y:158}},funcTop:function(d,c){return 0},funcDiff:function(d,c){return Math.abs(d)+1},funcLeft:function(d,c){return c.center.left+(d-0.5)*c.itemProperties.size.width},funcOpacity:function(d,c){return 0.8}},pages:{radius:{x:0,y:0},scaling:1,visibleItems:1,controls:{margin:{x:5,y:5}},strings:{prev:" ",next:" "},center:{left:200,top:200},itemProperties:{size:{width:400,height:400}},funcTop:function(d,c){return c.center.top-c.itemProperties.size.height/2},funcLeft:function(d,c){return c.center.left+d*c.itemProperties.size.width},funcDiff:function(d,c){return Math.abs(d)+0.5}},cubic:{center:{left:300,top:200},visibleItems:5,itemProperties:{size:{width:350,height:350},sizeFocused:{width:350,height:350}},controls:{margin:{x:70,y:330}},funcTop:function(d,c){return c.center.top-c.itemProperties.size.height/2+Math.pow(d/2,3)*c.radius.x},funcLeft:function(d,c){return c.center.left-c.itemProperties.size.width/2+Math.sin(d)*c.radius.x},funcSize:function(d,c){return Math.pow((Math.PI-Math.abs(d))/Math.PI,3)}},gallery:{visibleItems:4,center:{top:145,left:250},size:{height:400,width:500},controls:{margin:{x:10,y:255}},itemProperties:{delay:10,sizeFocused:{width:480,height:280},size:{width:100,height:100}},funcTop:function(d,c){return c.size.height-c.itemProperties.size.height-5},funcDiff:function(d,c){return Math.abs(d)-0.5},funcLeft:function(d,c){return c.center.left+(d-0.5)*(c.itemProperties.size.width+5)},funcOpacity:function(d,c){return 0.8}},slider:{visibleItems:1,fadeTime:1000,opacityMin:0.01,autoRotation:{enabled:true},center:{top:150,left:300},size:{height:300,width:600},controls:{margin:{x:-1,y:135}},itemProperties:{sizeFocused:{width:600,height:300},size:{width:600,height:300}},funcTop:function(d,c){return 0},funcLeft:function(d,c){return 0},funcOpacity:function(d,c){return 0.02}}}})(jQuery)}).call(this);