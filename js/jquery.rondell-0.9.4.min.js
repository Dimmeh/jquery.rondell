/*!
  jQuery rondell plugin
  @name jquery.rondell.js
  @author Sebastian Helzle (sebastian@helzle.net or @sebobo)
  @version 0.9.4
  @date 01/18/2013
  @category jQuery plugin
  @copyright (c) 2009-2013 Sebastian Helzle (www.sebastianhelzle.net)
  @license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
*/
(function(){var a=function(b,c){return function(){return b.apply(c,arguments)}};(function(c){var d,b;c.rondell||(c.rondell={version:"0.9.3",name:"rondell",defaults:{showContainer:true,classes:{container:"rondell-container",initializing:"rondell-initializing",themePrefix:"rondell-theme",caption:"rondell-caption",noScale:"no-scale",item:"rondell-item",resizeable:"rondell-item-resizeable",small:"rondell-item-small",hidden:"rondell-item-hidden",loading:"rondell-item-loading",hovered:"rondell-item-hovered",overlay:"rondell-item-overlay",focused:"rondell-item-focused",crop:"rondell-item-crop",error:"rondell-item-error",control:"rondell-control",shiftLeft:"rondell-shift-left",shiftRight:"rondell-shift-right"},currentLayer:0,container:null,radius:{x:250,y:50},center:{left:340,top:160},size:{width:null,height:null},visibleItems:"auto",scaling:2,opacityMin:0.05,fadeTime:300,keyDelay:300,zIndex:1000,itemProperties:{delay:100,size:{width:150,height:150},sizeFocused:{width:0,height:0}},repeating:true,wrapIndices:true,switchIndices:false,alwaysShowCaption:false,captionsEnabled:true,autoRotation:{enabled:false,paused:false,direction:0,once:false,delay:5000},controls:{enabled:true,fadeTime:400,margin:{x:130,y:270}},strings:{prev:"prev",next:"next",loadingError:"An error occured while loading <b>%s</b>"},mousewheel:{enabled:true,threshold:0,minTimeBetweenShifts:500},touch:{enabled:true,preventDefaults:true,threshold:100},randomStart:false,funcEase:"easeInOutQuad",theme:"default",preset:"",effect:null,onAfterShift:null,cropThumbnails:false,scrollbar:{enabled:false,orientation:"bottom",start:1,end:100,stepSize:1,keepStepOrder:true,position:1,padding:10,style:{width:"100%",height:20,left:"auto",right:"auto",top:"auto",bottom:"auto"},repeating:false,onScroll:void 0,scrollOnHover:false,scrollOnDrag:true,animationDuration:300,easing:"easeInOutQuad",classes:{container:"rondell-scrollbar",control:"rondell-scrollbar-control",dragging:"rondell-scrollbar-dragging",background:"rondell-scrollbar-background",scrollLeft:"rondell-scrollbar-left",scrollRight:"rondell-scrollbar-right",scrollInner:"rondell-scrollbar-inner"}}}});(b=c.easing).easeInOutQuad||(b.easeInOutQuad=function(f,g,e,i,h){if((g/=h/2)<1){return i/2*g*g+e}else{return -i/2*((--g)*(g-2)-1)+e}});d=(function(){e.rondellCount=0;e.activeRondell=null;function e(h,i,j,g){var k,f;if(g==null){g=void 0}this.keyDown=a(this.keyDown,this);this.isFocused=a(this.isFocused,this);this.onWindowBlur=a(this.onWindowBlur,this);this.onWindowFocus=a(this.onWindowFocus,this);this._autoShift=a(this._autoShift,this);this._autoShiftInit=a(this._autoShiftInit,this);this.shiftRight=a(this.shiftRight,this);this.shiftLeft=a(this.shiftLeft,this);this._refreshControls=a(this._refreshControls,this);this.getIndexInRange=a(this.getIndexInRange,this);this.getRelativeItemPosition=a(this.getRelativeItemPosition,this);this.shiftTo=a(this.shiftTo,this);this._hover=a(this._hover,this);this._onTouch=a(this._onTouch,this);this._onMousewheel=a(this._onMousewheel,this);this.bindEvents=a(this.bindEvents,this);this._start=a(this._start,this);this.onItemInit=a(this.onItemInit,this);this._loadItem=a(this._loadItem,this);this._getItem=a(this._getItem,this);this._onMouseLeaveItem=a(this._onMouseLeaveItem,this);this._onMouseEnterItem=a(this._onMouseEnterItem,this);this.fitToContainer=a(this.fitToContainer,this);this.id=++e.rondellCount;this.items=[];this.maxItems=j;this.loadedItems=0;this.initCallback=g;if(this.id===1){e.activeRondell=this.id}if((i!=null?i.preset:void 0) in c.rondell.presets){c.extend(true,this,c.rondell.defaults,c.rondell.presets[i.preset],i||{})}else{c.extend(true,this,c.rondell.defaults,i||{})}c.extend(true,this,{_dimensions:{computed:false},_lastKeyEvent:0,_windowFocused:true,_focusedIndex:this.currentLayer,_itemIndices:{0:0},autoRotation:{_timer:-1},controls:{_lastShift:0},touch:{_start:void 0,_end:void 0},scrollbar:{_instance:null}});this.itemProperties.sizeFocused={width:this.itemProperties.sizeFocused.width||this.itemProperties.size.width*this.scaling,height:this.itemProperties.sizeFocused.height||this.itemProperties.size.height*this.scaling};this.size={width:this.size.width||this.center.left*2,height:this.size.height||this.center.top*2};k=c("<div/>").css(this.size).addClass(""+this.classes.initializing+" "+this.classes.container+" "+this.classes.themePrefix+"-"+this.theme);this.container=h.wrapAll(k).parent();if(this.showContainer){this.container.parent().show()}if(this.scrollbar.enabled){f=c("<div/>");this.container.append(f);c.extend(true,this.scrollbar,{onScroll:this.shiftTo,end:this.maxItems,position:this.currentLayer,repeating:this.repeating});this.scrollbar._instance=new c.rondell.RondellScrollbar(f,this.scrollbar)}}e.prototype.log=function(f){return typeof console!=="undefined"&&console!==null?console.log(f):void 0};e.prototype.equals=function(h,f){var g,i;for(g in h){i=h[g];if(f[g]!==i){return false}}for(g in f){i=f[g];if(h[g]!==i){return false}}return true};e.prototype.funcLeft=function(f,h,g){return h.center.left-h.itemProperties.size.width/2+Math.sin(f)*h.radius.x};e.prototype.funcTop=function(f,h,g){return h.center.top-h.itemProperties.size.height/2+Math.cos(f)*h.radius.y};e.prototype.funcDiff=function(h,g,f){return Math.pow(Math.abs(h)/g.maxItems,0.5)*Math.PI};e.prototype.funcOpacity=function(f,h,g){if(h.visibleItems>1){return Math.max(0,1-Math.pow(f/h.visibleItems,2))}else{return 0}};e.prototype.funcSize=function(f,h,g){return 1};e.prototype.fitToContainer=function(){var g,h,j,f,i;i=this.container.parent();h=i.innerWidth();g=i.innerHeight();if(!this._dimensions.computed){f=this.size.width;j=this.size.height;c.extend(true,this._dimensions,{computed:true,center:{left:this.center.left/f,top:this.center.top/j},radius:{x:this.radius.x/f,y:this.radius.y/j},controls:{margin:{x:this.controls.margin.x/f,y:this.controls.margin.y/j}},itemProperties:{size:{width:this.itemProperties.size.width/f,height:this.itemProperties.size.height/j},sizeFocused:{width:this.itemProperties.sizeFocused.width/f,height:this.itemProperties.sizeFocused.height/j}}})}c.extend(true,this,{size:{width:h,height:g},center:{left:this._dimensions.center.left*h,top:this._dimensions.center.top*g},radius:{x:this._dimensions.radius.x*h,y:this._dimensions.radius.y*g},controls:{margin:{x:this._dimensions.controls.margin.x*h,y:this._dimensions.controls.margin.y*g}},itemProperties:{size:{width:this._dimensions.itemProperties.size.width*h,height:this._dimensions.itemProperties.size.height*g},sizeFocused:{width:this._dimensions.itemProperties.sizeFocused.width*h,height:this._dimensions.itemProperties.sizeFocused.height*g}}});this.container.css(this.size);return this.shiftTo(this.currentLayer)};e.prototype._onMouseEnterItem=function(f){return this._getItem(f).onMouseEnter()};e.prototype._onMouseLeaveItem=function(f){return this._getItem(f).onMouseLeave()};e.prototype._getItem=function(f){return this.items[f-1]};e.prototype._loadItem=function(f,h){var g;g=new c.rondell.RondellItem(f,h,this);this.items[f-1]=g;this._itemIndices[f]=f;g.init();if(++this.loadedItems===this.maxItems){return this._start()}};e.prototype.onItemInit=function(f){var g;g=this._getItem(f);if(f===this.currentLayer){g.prepareFadeIn()}else{g.prepareFadeOut()}return g.runAnimation(true)};e.prototype._start=function(){var f,g;if(this.randomStart){this.currentLayer=Math.round(Math.random()*(this.maxItems-1))}else{this.currentLayer=Math.max(0,Math.min(this.currentLayer||Math.round(this.maxItems/2),this.maxItems))}if(this.visibleItems==="auto"){this.visibleItems=Math.max(2,Math.floor(this.maxItems/2))}f=this.controls;if(f.enabled){this.controls._shiftLeft=c('<a href="#/"/>').addClass(""+this.classes.control+" "+this.classes.shiftLeft).html(this.strings.prev).click(this.shiftLeft).css({left:f.margin.x,top:f.margin.y,zIndex:this.zIndex+this.maxItems+2});this.controls._shiftRight=c('<a href="#/"/>').addClass(""+this.classes.control+" "+this.classes.shiftRight).html(this.strings.next).click(this.shiftRight).css({right:f.margin.x,top:f.margin.y,zIndex:this.zIndex+this.maxItems+2});this.container.append(this.controls._shiftLeft,this.controls._shiftRight)}this.bindEvents();this.container.removeClass(this.classes.initializing);if(typeof this.initCallback==="function"){this.initCallback(this)}if((g=this._focusedItem)==null){this._focusedItem=this._getItem(this.currentLayer)}return this.shiftTo(this.currentLayer)};e.prototype.bindEvents=function(){var f;c(document).keydown(this.keyDown);c(window).blur(this.onWindowBlur).focus(this.onWindowFocus);if(this.mousewheel.enabled&&(c.fn.mousewheel!=null)){this.container.bind("mousewheel",this._onMousewheel)}if(this._onMobile()){if(this.touch.enabled){this.container.bind("touchstart touchmove touchend",this._onTouch)}}else{this.container.bind("mouseenter mouseleave",this._hover)}f=this;return this.container.delegate("."+this.classes.item,"click",function(h){var g;g=c(this).data("item");if(f._focusedItem.id!==g.id){h.preventDefault();if(!g.hidden&&g.object.is(":visible")){return f.shiftTo(g.currentSlot)}}}).delegate("."+this.classes.item,"mouseenter mouseleave",function(h){var g;g=c(this).data("item");if(h.type==="mouseenter"){return f._onMouseEnterItem(g.id)}else{return f._onMouseLeaveItem(g.id)}})};e.prototype._onMobile=function(){return typeof Modernizr!=="undefined"&&Modernizr!==null?Modernizr.touch:void 0};e.prototype._onMousewheel=function(i,l,n,m){var g,h,k,j,f;if(!(this.mousewheel.enabled&&this.isFocused())){return}g=(new Date()).getTime();if(g-this.mousewheel._lastShift<this.mousewheel.minTimeBetweenShifts){return}k=c(window);f=k.scrollTop();j=f+k.height();h=this.container.offset().top+this.container.outerHeight()/2;if(h>f&&h<j&&Math.abs(n)>this.mousewheel.threshold){i.preventDefault();if(n<0){this.shiftLeft()}else{this.shiftRight()}return this.mousewheel._lastShift=g}};e.prototype._onTouch=function(f){var h,g;if(!this.touch.enabled){return}g=f.originalEvent.touches[0]||f.originalEvent.changedTouches[0];switch(f.type){case"touchstart":this.touch._start={x:g.pageX,y:g.pageY};break;case"touchmove":if(this.touch.preventDefaults){f.preventDefault()}this.touch._end={x:g.pageX,y:g.pageY};break;case"touchend":if(this.touch._start&&this.touch._end){h=this.touch._end.x-this.touch._start.x;if(Math.abs(h)>this.touch.threshold){if(h>0){this.shiftLeft()}else{if(h<0){this.shiftRight()}}}this.touch._start=this.touch._end=void 0}}return true};e.prototype._hover=function(g){var f;f=this.autoRotation.paused;if(g.type==="mouseenter"){e.activeRondell=this.id;this.hovering=true;if(!f){this.autoRotation.paused=true;this._focusedItem.showCaption()}}else{this.hovering=false;if(f&&!this.autoRotation.once){this.autoRotation.paused=false;this._autoShiftInit()}if(!this.alwaysShowCaption){this._focusedItem.hideCaption()}}if(this.controls.enabled){return this._refreshControls()}};e.prototype.shiftTo=function(r,n){var f,s,o,h,t,p,l,k,q,g,m,j,i;if(n==null){n=false}if(r==null){return}if(!n&&this.switchIndices&&r!==this.currentLayer&&this.getIndexInRange(r)===this._focusedItem.currentSlot){m=this.getRelativeItemPosition(r,true),f=m[0],t=m[1];if(t>this.currentLayer){r++}else{r--}}r=this.getIndexInRange(r);h=this._itemIndices[r];o=this._getItem(h);if(this.switchIndices){this._itemIndices[r]=this._focusedItem.id;this._itemIndices[this._focusedItem.currentSlot]=h;o.currentSlot=this._focusedItem.currentSlot;this._focusedItem.currentSlot=r}this._focusedItem=o;this.currentLayer=r;this._focusedItem.prepareFadeIn();j=this.items;for(l=0,q=j.length;l<q;l++){s=j[l];if(s!==this._focusedItem){s.prepareFadeOut()}}i=this.items;for(k=0,g=i.length;k<g;k++){s=i[k];s.runAnimation()}this._autoShiftInit();this._refreshControls();if(typeof this.onAfterShift==="function"){this.onAfterShift(r)}if(this.scrollbar.enabled){p=r;if(r===this._focusedItem.currentSlot){p=this._focusedItem.currentSlot+1}return this.scrollbar._instance.setPosition(p,false)}};e.prototype.getRelativeItemPosition=function(f,g){var i,h;if(g==null){g=this.wrapIndices}i=Math.abs(f-this.currentLayer);h=f;if(i>this.visibleItems&&i>this.maxItems/2&&this.repeating&&g){if(f>this.currentLayer){h-=this.maxItems}else{h+=this.maxItems}i=Math.abs(h-this.currentLayer)}return[i,h]};e.prototype.getIndexInRange=function(f){if(this.repeating){if(f<1){f+=this.maxItems}else{if(f>this.maxItems){f-=this.maxItems}}}else{if(f<1){f=1}else{if(f>this.maxItems){f=this.maxItems}}}return f};e.prototype._refreshControls=function(){if(!this.controls.enabled){return}this.controls._shiftLeft.stop().fadeTo(this.controls.fadeTime,(this.currentLayer>1||this.repeating)&&this.hovering?1:0);return this.controls._shiftRight.stop().fadeTo(this.controls.fadeTime,(this.currentLayer<this.maxItems||this.repeating)&&this.hovering?1:0)};e.prototype.shiftLeft=function(f){if(f!=null){f.preventDefault()}return this.shiftTo(this.currentLayer-1)};e.prototype.shiftRight=function(f){if(f!=null){f.preventDefault()}return this.shiftTo(this.currentLayer+1)};e.prototype._autoShiftInit=function(){var f;f=this.autoRotation;if(this.isActive()&&f.enabled&&f._timer<0){return f._timer=window.setTimeout(this._autoShift,f.delay)}};e.prototype._autoShift=function(){this.autoRotation._timer=-1;if(this.isActive()&&this.isFocused()&&!this.autoRotation.paused){if(this.autoRotation.direction){return this.shiftRight()}else{return this.shiftLeft()}}else{return this._autoShiftInit()}};e.prototype.onWindowFocus=function(){return this._windowFocused=true};e.prototype.onWindowBlur=function(){return this._windowFocused=false};e.prototype.isActive=function(){return true};e.prototype.isFocused=function(){return this._windowFocused&&e.activeRondell===this.id};e.prototype.keyDown=function(g){var f;if(!(this.isActive()&&this.isFocused())){return}f=(new Date()).getTime();if(this._lastKeyEvent>f-this.keyDelay){return}if(this.autoRotation._timer>=0){window.clearTimeout(this.autoRotation._timer);this.autoRotation._timer=-1}this._lastKeyEvent=f;switch(g.which){case 37:return this.shiftLeft(g);case 39:return this.shiftRight(g)}};return e})();return c.fn.rondell=function(f,g){var e;if(f==null){f={}}if(g==null){g=void 0}e=new d(this,f,this.length,g);this.each(function(h){return e._loadItem(h+1,c(this))});return e}})(jQuery);
/*!
    Presets for jQuery rondell plugin
  
    @author Sebastian Helzle (sebastian@helzle.net or @sebobo)
    @category jQuery plugin
    @copyright (c) 2009-2013 Sebastian Helzle (www.sebastianhelzle.net)
    @license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
  */
(function(b){b.rondell||(b.rondell={});return b.rondell.presets={carousel:{autoRotation:{enabled:true,direction:1,once:false,delay:5000},radius:{x:240,y:50},center:{left:340,top:160},controls:{margin:{x:130,y:260}},randomStart:true,currentLayer:1,funcSize:function(c,e,d){return 1/Math.abs(c)}},scroller:{repeating:false,alwaysShowCaption:true,visibleItems:4,theme:"dark",itemProperties:{delay:0,size:{width:100,height:200},sizeFocused:{width:300,height:200}},center:{left:400,top:100},size:{width:800,height:200},controls:{margin:{x:210,y:158}},funcTop:function(c,e,d){return 0},funcDiff:function(f,e,c){return Math.abs(f)+1},funcLeft:function(c,e,d){return e.center.left+(c-0.5)*e.itemProperties.size.width},funcOpacity:function(c,e,d){return 0.8}},pages:{radius:{x:0,y:0},scaling:1,theme:"page",visibleItems:1,controls:{margin:{x:0,y:0}},strings:{prev:" ",next:" "},center:{left:200,top:200},itemProperties:{size:{width:400,height:400}},funcTop:function(c,e,d){return e.center.top-e.itemProperties.size.height/2},funcLeft:function(c,e,d){return e.center.left+c*e.itemProperties.size.width},funcDiff:function(c,e,d){return Math.abs(c)+0.5}},cubic:{center:{left:300,top:200},visibleItems:5,itemProperties:{size:{width:350,height:350},sizeFocused:{width:350,height:350}},controls:{margin:{x:70,y:330}},funcTop:function(c,e,d){return e.center.top-e.itemProperties.size.height/2+Math.pow(c/2,3)*e.radius.x},funcLeft:function(c,e,d){return e.center.left-e.itemProperties.size.width/2+Math.sin(c)*e.radius.x},funcSize:function(c,e,d){return Math.pow((Math.PI-Math.abs(c))/Math.PI,3)}},gallery:{special:{itemPadding:2},visibleItems:5,theme:"dark",cropThumbnails:true,center:{top:145,left:250},size:{height:400,width:500},controls:{margin:{x:10,y:255}},itemProperties:{delay:0,sizeFocused:{width:480,height:280},size:{width:80,height:100}},funcTop:function(c,e,d){return e.size.height-e.itemProperties.size.height-e.special.itemPadding},funcDiff:function(f,e,c){return Math.abs(f)-0.5},funcLeft:function(c,e,d){return e.center.left+(c-0.5)*(e.itemProperties.size.width+e.special.itemPadding)},funcOpacity:function(c,e,d){return 0.8}},thumbGallery:{special:{columns:3,rows:3,groupSize:9,itemPadding:5,thumbsOffset:{x:500,y:0}},visibleItems:9,wrapIndices:false,currentLayer:1,switchIndices:true,cropThumbnails:true,center:{top:215,left:250},size:{height:430,width:800},controls:{enabled:false,margin:{x:10,y:255}},itemProperties:{delay:40,sizeFocused:{width:480,height:420},size:{width:94,height:126}},scrollbar:{enabled:true,stepSize:9,start:2,style:{width:292,right:3,bottom:5}},funcDiff:function(f,e,c){return Math.abs(f)},funcOpacity:function(c,e,d){var f;f=e.currentLayer>e._focusedItem.currentSlot?e.currentLayer-1:e.currentLayer;if(d>e._focusedItem.currentSlot){d--}if(Math.floor((d-1)/e.special.groupSize)===Math.floor((f-1)/e.special.groupSize)){return 0.8}else{return 0}},funcTop:function(c,e,d){if(d>e._focusedItem.currentSlot){d--}return e.special.thumbsOffset.y+e.special.itemPadding+Math.floor(((d-1)%e.special.groupSize)/e.special.rows)*(e.itemProperties.size.height+e.special.itemPadding)},funcLeft:function(c,g,e){var f,h,d;h=g.currentLayer>g._focusedItem.currentSlot?g.currentLayer-1:g.currentLayer;if(e>g._focusedItem.currentSlot){e--}f=((e-1)%g.special.groupSize)%g.special.columns;d=Math.floor((e-1)/g.special.groupSize)-Math.floor((h-1)/g.special.groupSize);return g.special.thumbsOffset.x+g.special.itemPadding+(f+g.special.columns*d)*(g.itemProperties.size.width+g.special.itemPadding)}},slider:{theme:"slider",visibleItems:1,fadeTime:1000,opacityMin:0.01,autoRotation:{enabled:true},center:{top:150,left:300},size:{height:300,width:600},controls:{margin:{x:-1,y:135}},strings:{prev:"<span>&nbsp;</span>",next:"<span>&nbsp;</span>"},itemProperties:{sizeFocused:{width:600,height:300},size:{width:600,height:300}},funcTop:function(c,e,d){return 0},funcLeft:function(c,e,d){return 0},funcOpacity:function(c,e,d){return 0.02}}}})(jQuery);
/*!
    RondellItem for jQuery rondell plugin
  
    @author Sebastian Helzle (sebastian@helzle.net or @sebobo)
    @category jQuery plugin
    @copyright (c) 2009-2012 Sebastian Helzle (www.sebastianhelzle.net)
    @license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
  */
(function(b){b.rondell||(b.rondell={});return b.rondell.RondellItem=(function(){function c(f,e,d){this.runAnimation=a(this.runAnimation,this);this.onAnimationFinished=a(this.onAnimationFinished,this);this.prepareFadeOut=a(this.prepareFadeOut,this);this.prepareFadeIn=a(this.prepareFadeIn,this);this.hideCaption=a(this.hideCaption,this);this.showCaption=a(this.showCaption,this);this.onMouseLeave=a(this.onMouseLeave,this);this.onMouseEnter=a(this.onMouseEnter,this);this.finalize=a(this.finalize,this);this.onError=a(this.onError,this);this.onIconLoad=a(this.onIconLoad,this);this.refreshDimensions=a(this.refreshDimensions,this);this.init=a(this.init,this);this.id=f;this.object=e;this.rondell=d;this.currentSlot=f;this.focused=false;this.hidden=false;this.animating=false;this.isNew=true;this.icon=null;this.resizeable=true;this.iconCopy=null;this.croppedSize=d.itemProperties.size;this.sizeSmall=d.itemProperties.size;this.sizeFocused=d.itemProperties.sizeFocused;this.objectCSSTarget={};this.objectAnimationTarget={};this.lastObjectAnimationTarget={};this.iconAnimationTarget={};this.lastIconAnimationTarget={};this.animationSpeed=d.fadeTime}c.prototype.init=function(){var d;if(this.object.is("img")){this.object=this.object.wrap("<div/>").parent()}this.object.addClass(""+this.rondell.classes.item).data("item",this).css({opacity:0,width:this.sizeSmall.width,height:this.sizeSmall.height,left:this.rondell.center.left-this.sizeFocused.width/2,top:this.rondell.center.top-this.sizeFocused.height/2});d=this.object.find("img:first");if(d.length){this.icon=d;this.resizeable=!d.hasClass(this.rondell.classes.noScale);this.object.addClass(this.rondell.classes.loading);if(d.width()>0||(d[0].complete&&d[0].width>0)){return window.setTimeout(this.onIconLoad,10)}else{this.iconCopy=b('<img style="display:none"/>');b("body").append(this.iconCopy);return this.iconCopy.one("load",this.onIconLoad).one("error",this.onError).attr("src",d.attr("src"))}}else{return this.finalize()}};c.prototype.refreshDimensions=function(){var d,p,g,o,m,l,q,k,n,j,i,h,f,e;l=((j=this.iconCopy)!=null?j.width():void 0)||((i=this.iconCopy)!=null?i[0].width:void 0)||this.icon[0].width||this.icon.width();m=((h=this.iconCopy)!=null?h.height():void 0)||((f=this.iconCopy)!=null?f[0].height:void 0)||this.icon[0].height||this.icon.height();g=n=l;p=k=m;q=this.rondell.itemProperties.size;o=this.rondell.itemProperties.sizeFocused;d=q;if((e=this.iconCopy)!=null){e.remove()}if(!(l&&m)){return}if(this.resizeable){this.icon.addClass(this.rondell.classes.resizeable);k*=q.width/n;n=q.width;if(k>q.height){n*=q.height/k;k=q.height}if(this.rondell.cropThumbnails){if(!this.icon.parent().hasClass(this.rondell.classes.crop)){this.icon.wrap(b("<div>").addClass(this.rondell.classes.crop))}d={width:q.width,height:q.width/n*k};if(d.height<q.height){d={width:q.height/d.height*d.width,height:q.height}}n=q.width;k=q.height}p*=o.width/g;g=o.width;if(p>o.height){g*=o.height/p;p=o.height}}else{n=q.width;k=q.height;g=o.width;p=o.height}this.croppedSize=d;this.iconWidth=l;this.iconHeight=m;this.sizeSmall={width:Math.round(n),height:Math.round(k)};return this.sizeFocused={width:Math.round(g),height:Math.round(p)}};c.prototype.onIconLoad=function(){this.refreshDimensions();return this.finalize()};c.prototype.onError=function(){var d,e;d=this.rondell.strings.loadingError.replace("%s",this.icon.attr("src"));this.icon.remove();if((e=this.iconCopy)!=null){e.remove()}return this.object.removeClass(this.rondell.classes.loading).addClass(this.rondell.classes.error).html("<p>"+d+"</p>")};c.prototype.finalize=function(){var e,g,f,h,d,j,i;this.object.removeClass(this.rondell.classes.loading);if(this.rondell.captionsEnabled){g=null;if(this.rondell.cropThumbnails){g=(h=this.icon)!=null?h.closest("."+this.rondell.classes.crop).siblings():void 0}else{g=(d=this.icon)!=null?d.siblings():void 0}if(!((g!=null?g.length:void 0)||this.icon)&&this.object.children().length){g=this.object.children()}if(!(g!=null?g.length:void 0)){e=this.object.attr("title")||((j=this.icon)!=null?j.attr("title"):void 0)||((i=this.icon)!=null?i.attr("alt"):void 0);if(e){g=b("<p>"+e+"</p>");this.object.append(g)}}if(g!=null?g.length:void 0){f=(g.wrapAll("<div/>")).parent().addClass(this.rondell.classes.caption);if(this.icon){this.overlay=f.addClass(this.rondell.classes.overlay)}}}return this.rondell.onItemInit(this.id)};c.prototype.onMouseEnter=function(){if(!this.animating&&!this.hidden&&this.object.is(":visible")){return this.object.addClass(this.rondell.itemHoveredClass).stop(true).animate({opacity:1},this.rondell.fadeTime,this.rondell.funcEase)}};c.prototype.onMouseLeave=function(){this.object.removeClass(this.rondell.classes.hovered);if(!(this.animating||this.hidden)){return this.object.stop(true).animate({opacity:this.objectAnimationTarget.opacity},this.rondell.fadeTime,this.rondell.funcEase)}};c.prototype.showCaption=function(){if(this.rondell.captionsEnabled&&(this.overlay!=null)){return this.overlay.stop(true).css({height:"auto",overflow:"auto"}).fadeTo(300,1)}};c.prototype.hideCaption=function(){var d;if(this.rondell.captionsEnabled&&((d=this.overlay)!=null?d.is(":visible"):void 0)){return this.overlay.stop(true).css({height:this.overlay.height(),overflow:"hidden"}).fadeTo(200,0)}};c.prototype.prepareFadeIn=function(){var e,g,d,f;this.focused=true;this.hidden=false;f=this.sizeFocused.width;d=this.sizeFocused.height;this.lastObjectAnimationTarget=this.objectAnimationTarget;this.objectAnimationTarget={width:f,height:d,left:this.rondell.center.left-f/2,top:this.rondell.center.top-d/2,opacity:1};this.objectCSSTarget={zIndex:this.rondell.zIndex+this.rondell.maxItems,display:"block"};this.animationSpeed=this.rondell.fadeTime;if(this.icon){this.lastIconAnimationTarget=this.iconAnimationTarget;e=0;g=0;if(!this.resizeable){g=(this.rondell.itemProperties.sizeFocused.height-this.iconHeight)/2;e=(this.rondell.itemProperties.sizeFocused.width-this.iconWidth)/2;this.iconAnimationTarget.marginTop=g;this.iconAnimationTarget.marginLeft=e}if(this.rondell.cropThumbnails){return this.iconAnimationTarget={marginTop:g,marginLeft:e,width:f,height:d}}}};c.prototype.prepareFadeOut=function(){var k,f,h,e,d,i,j,l,g;this.focused=false;k=this.currentSlot;g=this.rondell.getRelativeItemPosition(k),d=g[0],i=g[1];e=this.rondell.funcDiff(i-this.rondell.currentLayer,this.rondell,k);if(i<this.rondell.currentLayer){e*=-1}h=this.sizeSmall.width*this.rondell.funcSize(e,this.rondell);f=this.sizeSmall.height*this.rondell.funcSize(e,this.rondell);l=this.rondell.zIndex-d;this.animationSpeed=this.rondell.fadeTime+this.rondell.itemProperties.delay*d;j={width:h,height:f,left:this.rondell.funcLeft(e,this.rondell,k)+(this.rondell.itemProperties.size.width-h)/2,top:this.rondell.funcTop(e,this.rondell,k)+(this.rondell.itemProperties.size.height-f)/2,opacity:0};this.objectCSSTarget={zIndex:l,display:"block"};if(d<=this.rondell.visibleItems){j.opacity=this.rondell.funcOpacity(e,this.rondell,k);this.hidden=false;if(this.icon){this.lastIconAnimationTarget=this.iconAnimationTarget;if(this.rondell.cropThumbnails){this.iconAnimationTarget={marginTop:(this.rondell.itemProperties.size.height-this.croppedSize.height)/2,marginLeft:(this.rondell.itemProperties.size.width-this.croppedSize.width)/2,width:this.croppedSize.width,height:this.croppedSize.height}}if(!this.resizeable){this.iconAnimationTarget={marginTop:(this.rondell.itemProperties.size.height-this.iconHeight)/2,marginLeft:(this.rondell.itemProperties.size.width-this.iconWidth)/2}}}}else{if(this.hidden){b.extend(this.objectCSSTarget,j)}}this.lastObjectAnimationTarget=this.objectAnimationTarget;return this.objectAnimationTarget=j};c.prototype.onAnimationFinished=function(){this.animating=false;if(this.focused){this.object.addClass(this.rondell.classes.focused);if(this.rondell.hovering||this.rondell.alwaysShowCaption||this.rondell._onMobile()){return this.showCaption()}}else{if(this.objectAnimationTarget.opacity<this.rondell.opacityMin){this.hidden=true;return this.object.css("display","none")}else{this.hidden=false;return this.object.css("display","block")}}};c.prototype.runAnimation=function(d){if(d==null){d=false}this.object.css(this.objectCSSTarget);if(!this.hidden){if((d||this.iconAnimationTarget)&&this.icon&&(this.focused||!this.rondell.equals(this.iconAnimationTarget,this.lastIconAnimationTarget))){this.icon.stop(true).animate(this.iconAnimationTarget,this.animationSpeed,this.rondell.funcEase)}if((d||(this.objectAnimationTarget!=null))&&(this.focused||!this.rondell.equals(this.objectAnimationTarget,this.lastObjectAnimationTarget))){this.animating=true;this.object.stop(true).animate(this.objectAnimationTarget,this.animationSpeed,this.rondell.funcEase,this.onAnimationFinished);if(!this.focused){this.object.removeClass(this.rondell.classes.focused);return this.hideCaption()}}else{return this.onAnimationFinished()}}};return c})()})(jQuery);
/*!
    Scrollbar for jQuery rondell plugin
    
    @author Sebastian Helzle (sebastian@helzle.net or @sebobo)
    @category jQuery plugin
    @copyright (c) 2009-2012 Sebastian Helzle (www.sebastianhelzle.net)
    @license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
  */
(function(b){b.rondell||(b.rondell={});return b.rondell.RondellScrollbar=(function(){function c(d,e){this.scrollRight=a(this.scrollRight,this);this.scrollLeft=a(this.scrollLeft,this);this.onScrollbarClick=a(this.onScrollbarClick,this);this.onDragStart=a(this.onDragStart,this);this.onDrag=a(this.onDrag,this);this.setPosition=a(this.setPosition,this);this.scrollTo=a(this.scrollTo,this);this.updatePosition=a(this.updatePosition,this);this._initControls=a(this._initControls,this);b.extend(true,this,b.rondell.defaults.scrollbar,e);this.container=d.addClass(this.classes.container);this._drag={_dragging:false,_lastDragEvent:0};this.container.addClass(""+this.classes.container+"-"+this.orientation).css(this.style);this._initControls();this._minX=this.padding+this.scrollLeftControl.outerWidth()+this.scrollControl.outerWidth()/2;this._maxX=this.container.innerWidth()-this.padding-this.scrollRightControl.outerWidth()-this.scrollControl.outerWidth()/2;this.setPosition(this.position,false,true)}c.prototype._initControls=function(){var d;d='<div><span class="'+this.classes.scrollInner+'">&nbsp;</span></div>';this.scrollLeftControl=b(d).addClass(this.classes.scrollLeft).click(this.scrollLeft);this.scrollRightControl=b(d).addClass(this.classes.scrollRight).click(this.scrollRight);this.scrollControl=b('<div class="'+this.classes.control+'">&nbsp;</div>').css("left",this.container.innerWidth()/2).mousedown(this.onDragStart);this.scrollBackground=b('<div class="'+this.classes.background+'"/>');this.container.append(this.scrollBackground,this.scrollLeftControl,this.scrollRightControl,this.scrollControl);return this.container.add(this.scrollBackground).click(this.onScrollbarClick)};c.prototype.updatePosition=function(d,e){if(e==null){e=true}if(!d||d===this.position||d<this.start||d>this.end){return}this.position=d;if(e){return typeof this.onScroll==="function"?this.onScroll(d,true):void 0}};c.prototype.scrollTo=function(e,g,f){var h,d,i;if(g==null){g=true}if(f==null){f=true}if(e<this._minX||e>this._maxX){return}d=this.scrollControl.stop(true);i={left:e};if(g){d.animate(i,this.animationDuration,this.easing)}else{d.css(i)}h=Math.round((e-this._minX)/(this._maxX-this._minX)*(this.end-this.start))+this.start;if(h!==this.position){return this.updatePosition(h,f)}};c.prototype.setPosition=function(d,e,f){var g;if(e==null){e=true}if(f==null){f=false}if(this.repeating){if(d<this.start){d=this.end}if(d>this.end){d=this.start}}if(!f&&(d<this.start||d>this.end||d===this.position)){return}g=Math.round((d-this.start)/(this.end-this.start)*(this._maxX-this._minX))+this._minX;return this.scrollTo(g,true,e)};c.prototype.onDrag=function(f){var g,d;f.preventDefault();if(!this._drag._dragging){return}if(f.type==="mouseup"){this._drag._dragging=false;this.scrollControl.removeClass(this.classes.dragging);return b(window).unbind("mousemove mouseup",this.onDrag)}else{g=0;if((d=this.orientation)==="top"||d==="bottom"){g=f.pageX-this.container.offset().left}else{g=f.pageY-this.container.offset().top}g=Math.max(this._minX,Math.min(this._maxX,g));return this.scrollTo(g,false)}};c.prototype.onDragStart=function(d){d.preventDefault();this._drag._dragging=true;this.scrollControl.addClass(this.classes.dragging);return b(window).bind("mousemove mouseup",this.onDrag)};c.prototype.onScrollbarClick=function(d){return this.scrollTo(d.pageX-this.container.offset().left)};c.prototype.scrollLeft=function(f){var d;f.preventDefault();d=this.position-this.stepSize;if(this.keepStepOrder&&this.stepSize>1){if(d>=this.start){d-=(d-this.start)%this.stepSize}else{if(this.repeating){d=this.start+Math.floor((this.end-this.start)/this.stepSize)*this.stepSize}}}return this.setPosition(d)};c.prototype.scrollRight=function(f){var d;f.preventDefault();d=this.position+this.stepSize;if(this.keepStepOrder&&this.stepSize>1){d-=(d-this.start)%this.stepSize;if(this.repeating&&d>this.end){d=this.start}}return this.setPosition(d)};return c})()})(jQuery)}).call(this);